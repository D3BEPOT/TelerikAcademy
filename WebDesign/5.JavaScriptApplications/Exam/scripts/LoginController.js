// Generated by CoffeeScript 1.4.0
(function() {
  var form, scope;

  form = $('.js-login');

  scope = form.closest('.js-view').data('scope');

  form.submit(function(e) {
    var data;
    e.preventDefault();
    data = form.serializeObject();
    form.find('input, button').attr('disabled', 'disabled');
    return setTimeout(function() {
      return scope.persister.login(data).done(function() {
        location.hash = '#!/game.html';
        return console.log('Login success.');
      }).fail(function(err) {
        var message, text;
        message = JSON.parse(err.responseText).Message;
        text = $('<p class="text-error" />').text(message);
        form.find('input, button').removeAttr('disabled');
        form.append(text);
        console.log('Login error.');
        return setTimeout(function() {
          return text.fadeOut();
        }, 2000);
      });
    }, 500);
  });

}).call(this);
